
{% load static %}
<!doctype html>
<html lang="en" dir="ltr">
	<head>

		<!-- META DATA -->
		<meta charset="UTF-8">
		<meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=0'>
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="description" content="Zanex â€“ Bootstrap  Admin & Dashboard Template">
		<meta name="author" content="Spruko Technologies Private Limited">
		<meta name="keywords" content="admin, dashboard, dashboard ui, admin dashboard template, admin panel dashboard, admin panel html, admin panel html template, admin panel template, admin ui templates, administrative templates, best admin dashboard, best admin templates, bootstrap 4 admin template, bootstrap admin dashboard, bootstrap admin panel, html css admin templates, html5 admin template, premium bootstrap templates, responsive admin template, template admin bootstrap 4, themeforest html">

		<!-- FAVICON -->
		<link rel="shortcut icon" type="image/x-icon" href="{% static 'assets/images/brand/favicon.ico' %}" />

		<!-- TITLE -->
		<title>{% block title %} {% endblock title %}</title>

		<!-- BOOTSTRAP CSS -->
		<link href="{% static 'assets/plugins/bootstrap/css/bootstrap.min.css' %}" rel="stylesheet" />

		<!-- STYLE CSS -->
		<link href="{% static 'assets/css/style.css' %}" rel="stylesheet"/>
		<link href="{% static 'assets/css/dark-style.css' %}" rel="stylesheet"/>
		<link href="{% static 'assets/css/skin-modes.css' %}" rel="stylesheet" />

		<link href="https://cdn.rawgit.com/harvesthq/chosen/gh-pages/chosen.min.css" rel="stylesheet"/>
		

		<link href="{% static 'css/custom.css' %}" rel="stylesheet" />

		<!--C3 CHARTS CSS -->
		<link href="{% static 'assets/plugins/charts-c3/c3-chart.css' %}" rel="stylesheet"/>

		<!-- P-scroll bar css-->
		<link href="{% static 'assets/plugins/p-scroll/perfect-scrollbar.css' %}" rel="stylesheet" />

		<!--- FONT-ICONS CSS -->
		<link href="{% static 'assets/css/icons.css' %}" rel="stylesheet"/>

		<!-- SIDEBAR CSS -->
		<link href="{% static 'assets/plugins/sidebar/sidebar.css' %}" rel="stylesheet">

		<!-- SELECT2 CSS -->
		<link href="{% static 'assets/plugins/select2/select2.min.css' %}" rel="stylesheet"/>

		<!-- INTERNAL Data table css -->
		<link href="{% static 'assets/plugins/datatable/css/dataTables.bootstrap5.css' %}" rel="stylesheet" />
		<link href="{% static 'assets/plugins/datatable/responsive.bootstrap5.css' %}" rel="stylesheet" />

		<!-- COLOR SKIN CSS -->
		<link id="theme" rel="stylesheet" type="text/css" media="all" href="{% static 'assets/colors/color1.css' %}" />

		<link href="{% static 'css/fileuploader.css' %}" rel="stylesheet" />

		<!--bootstrap dropdown select arrow css-->
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/css/bootstrap-select.min.css">

	</head>

	<body>

		<!-- GLOBAL-LOADER -->
		<div id="global-loader">
			<img src="{% static 'assets/images/loader.svg' %}" class="loader-img" alt="Loader">
		</div>
		<!-- /GLOBAL-LOADER -->

		<!-- PAGE -->
		<div class="page">
			<div class="page-main">

				<!-- HEADER -->
				<div class="header hor-header">
					<div class="container">
						<div class="d-flex">
							<a class="animated-arrow hor-toggle horizontal-navtoggle"><span></span></a>
							<a class="header-brand1" href="{% url 'index_page' %}">
								<img src="{% static 'assets/images/brand/logo-3.png' %}" class="header-brand-img desktop-logo" alt="logo">
								<img src="{% static 'assets/images/brand/logo.png' %}" class="header-brand-img light-logo" alt="logo">
							</a><!-- LOGO -->
							
							<div class="d-flex order-lg-2 ms-auto header-right-icons">
								<div class="dropdown d-lg-none d-md-block d-none">
									<a href="#" class="nav-link icon" data-bs-toggle="dropdown">
										<i class="fe fe-search"></i>
									</a>
									<div class="dropdown-menu header-search dropdown-menu-start">
										<div class="input-group w-100 p-2">
											<input type="text" class="form-control" placeholder="Search....">
											<div class="input-group-text btn btn-primary">
												<i class="fa fa-search" aria-hidden="true"></i>
											</div>
										</div>
									</div>
								</div><!-- SEARCH -->
								<button class="navbar-toggler navresponsive-toggler d-md-none ms-auto" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent-4" aria-controls="navbarSupportedContent-4" aria-expanded="false" aria-label="Toggle navigation">
									<span class="navbar-toggler-icon fe fe-more-vertical text-dark"></span>
								</button>
								<div class="dropdown d-none d-md-flex">
									<a class="nav-link icon theme-layout nav-link-bg layout-setting">
										<span class="dark-layout" data-bs-placement="bottom" data-bs-toggle="tooltip" title="Dark Theme"><i class="fe fe-moon"></i></span>
										<span class="light-layout" data-bs-placement="bottom" data-bs-toggle="tooltip" title="Light Theme"><i class="fe fe-sun"></i></span>
									</a>
								</div><!-- Theme-Layout -->
								<div class="dropdown d-none d-md-flex">
									<a class="nav-link icon full-screen-link nav-link-bg">
										<i class="fe fe-minimize fullscreen-button"></i>
									</a>
								</div><!-- FULL-SCREEN -->
								<!-- there was notification button -->
								<!-- there was MESSAGE-BOX -->
								<div class="dropdown d-none d-md-flex profile-1">
									<a href="#" data-bs-toggle="dropdown" class="nav-link pe-2 leading-none d-flex">
										<span>
											<img src="{{request.user.profile_picture.url}}" alt="profile-user" class="avatar  profile-user brround cover-image">
										</span>
									</a>
									<div class="dropdown-menu dropdown-menu-end dropdown-menu-arrow">
										<div class="drop-heading">
											<div class="text-center">
												<h5 class="text-dark mb-0">Elizabeth Dyer</h5>
												<small class="text-muted">Administrator</small>
											</div>
										</div>
										<div class="dropdown-divider m-0"></div>
										<a class="dropdown-item" href="{% url 'profile' %}">
	<i class="dropdown-icon fe fe-user"></i> Profile
										</a>
									
										<a class="dropdown-item" href="{% url 'logout' %}">
											<i class="dropdown-icon fe fe-alert-circle"></i> Sign out
										</a>
									</div>
								</div>
								<!-- SIDE-MENU ends here -->
							</div>
						</div>
					</div>
				</div>
				<!-- End HEADER -->

				<!-- Mobile Header -->
				<div class="mobile-header hor-mobile-header">
					<div class="container">
						<div class="d-flex">
							<a class="animated-arrow hor-toggle horizontal-navtoggle"><span></span></a>
							<a class="header-brand" href="index.html">
								<img src="{% static 'assets/images/brand/logo.png' %}" class="header-brand-img desktop-logo" alt="logo">
								<img src="{% static 'assets/images/brand/logo-3.png' %}" class="header-brand-img desktop-logo mobile-light" alt="logo">
							</a>
							<div class="main-header-center ms-3 d-none d-md-block">
								<input class="form-control" placeholder="Search for anything..." type="search"> <button class="btn"><i class="fa fa-search" aria-hidden="true"></i></button>
							</div>
							<div class="d-flex order-lg-2 ms-auto header-right-icons">
								<div class="dropdown d-lg-none d-md-block d-none">
									<a href="#" class="nav-link icon" data-bs-toggle="dropdown">
										<i class="fe fe-search"></i>
									</a>
									<div class="dropdown-menu header-search dropdown-menu-start">
										<div class="input-group w-100 p-2">
											<input type="text" class="form-control" placeholder="Search....">
											<div class="input-group-text btn btn-primary">
												<i class="fa fa-search" aria-hidden="true"></i>
											</div>
										</div>
									</div>
								</div><!-- SEARCH -->
								<button class="navbar-toggler navresponsive-toggler d-md-none ms-auto" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent-4" aria-controls="navbarSupportedContent-4" aria-expanded="false" aria-label="Toggle navigation">
									<span class="navbar-toggler-icon fe fe-more-vertical text-dark"></span>
								</button>
								<div class="dropdown d-none d-md-flex">
									<a class="nav-link icon theme-layout nav-link-bg layout-setting">
										<span class="dark-layout" data-bs-placement="bottom" data-bs-toggle="tooltip" title="Dark Theme"><i class="fe fe-moon"></i></span>
										<span class="light-layout" data-bs-placement="bottom" data-bs-toggle="tooltip" title="Light Theme"><i class="fe fe-sun"></i></span>
									</a>
								</div><!-- Theme-Layout -->
								<div class="dropdown d-none d-md-flex">
									<a class="nav-link icon full-screen-link nav-link-bg">
										<i class="fe fe-minimize fullscreen-button"></i>
									</a>
								</div><!-- FULL-SCREEN -->
								<!-- there was mobile- NOTIFICATIONS -->
								<!-- there was mobile MESSAGE-BOX -->
								<div class="dropdown d-none d-md-flex profile-1">
									<a href="#" data-bs-toggle="dropdown" class="nav-link pe-2 leading-none d-flex">
										<span>
											<img src="{% static 'assets/images/users/8.jpg' %}" alt="profile-user" class="avatar  profile-user brround cover-image">
										</span>
									</a>
									<div class="dropdown-menu dropdown-menu-end dropdown-menu-arrow">
										<div class="drop-heading">
											<div class="text-center">
												<h5 class="text-dark mb-0">Elizabeth Dyer</h5>
												<small class="text-muted">Administrator</small>
											</div>
										</div>
										<div class="dropdown-divider m-0"></div>
										<a class="dropdown-item" href="profile.html">
	<i class="dropdown-icon fe fe-user"></i> Profile
										</a>
										<a class="dropdown-item" href="email.html">
											<i class="dropdown-icon fe fe-mail"></i> Inbox
											<span class="badge bg-primary float-end">3</span>
										</a>
										<a class="dropdown-item" href="emailservices.html">
											<i class="dropdown-icon fe fe-settings"></i> Settings
										</a>
										<a class="dropdown-item" href="faq.html">
											<i class="dropdown-icon fe fe-alert-triangle"></i> Need help??
										</a>
										<a class="dropdown-item" href="login.html">
											<i class="dropdown-icon fe fe-alert-circle"></i> Sign out
										</a>
									</div>
								</div>
								<!-- SIDE-MENU ends here -->
							</div>
						</div>
					</div>
				</div>
				<div class="mb-1 navbar navbar-expand-lg  responsive-navbar navbar-dark d-md-none bg-white">
					<div class="collapse navbar-collapse" id="navbarSupportedContent-4">
						<div class="d-flex order-lg-2 ms-auto">
							<div class="dropdown d-sm-flex">
								<a href="#" class="nav-link icon" data-bs-toggle="dropdown">
									<i class="fe fe-search"></i>
								</a>
								<div class="dropdown-menu header-search dropdown-menu-start">
									<div class="input-group w-100 p-2">
										<input type="text" class="form-control" placeholder="Search....">
										<div class="input-group-text btn btn-primary">
											<i class="fa fa-search" aria-hidden="true"></i>
										</div>
									</div>
								</div>
							</div><!-- SEARCH -->
							<div class="dropdown d-md-flex">
								<a class="nav-link icon theme-layout nav-link-bg layout-setting">
									<span class="dark-layout" data-bs-placement="bottom" data-bs-toggle="tooltip" title="Dark Theme"><i class="fe fe-moon"></i></span>
									<span class="light-layout" data-bs-placement="bottom" data-bs-toggle="tooltip" title="Light Theme"><i class="fe fe-sun"></i></span>
								</a>
							</div><!-- Theme-Layout -->
							<div class="dropdown d-md-flex">
								<a class="nav-link icon full-screen-link nav-link-bg">
									<i class="fe fe-minimize fullscreen-button"></i>
								</a>
							</div><!-- FULL-SCREEN -->
							
							<!-- NOTIFICATIONS -->
							
							<!-- MESSAGE-BOX -->
							<div class="dropdown d-md-flex profile-1">
								<a href="#" data-bs-toggle="dropdown" class="nav-link pe-2 leading-none d-flex">
									<span>
										<img src="{% static 'assets/images/users/8.jpg' %}" alt="profile-user" class="avatar  profile-user brround cover-image">
									</span>
								</a>
								<div class="dropdown-menu dropdown-menu-end dropdown-menu-arrow">
									<div class="drop-heading">
										<div class="text-center">
											<h5 class="text-dark mb-0">Elizabeth Dyer</h5>
											<small class="text-muted">Administrator</small>
										</div>
									</div>
									<div class="dropdown-divider m-0"></div>
									<a class="dropdown-item" href="#">
<i class="dropdown-icon fe fe-user"></i> Profile
									</a>
									<a class="dropdown-item" href="#">
										<i class="dropdown-icon fe fe-mail"></i> Inbox
										<span class="badge bg-primary float-end">3</span>
									</a>
									<a class="dropdown-item" href="#">
										<i class="dropdown-icon fe fe-settings"></i> Settings
									</a>
									<a class="dropdown-item" href="#">
										<i class="dropdown-icon fe fe-alert-triangle"></i> Need help?
									</a>
									<a class="dropdown-item" href="login.html">
										<i class="dropdown-icon fe fe-alert-circle"></i> Sign out
									</a>
								</div>
							</div>
							<!-- SIDE-MENU ends here-->
						</div>
					</div>
				</div>
				<!-- /Mobile Header -->

				<!--/Horizontal-main -->
				<div class="sticky">
					<div class="horizontal-main hor-menu clearfix">
						<div class="horizontal-mainwrapper container clearfix">
							<!--Nav-->
							<nav class="horizontalMenu clearfix">
								<ul class="horizontalMenu-list">
									{% if request.user.is_admin or request.user.is_moderator or request.user.has_tour_perm %}
									<li aria-haspopup="true"><a href="{% url 'home' %}"><i class="fe fe-home"></i> Dashboard</a></li>

									<li aria-haspopup="true"><a href="{% url 'tour' %}"><i class="fa fa-bus"></i>
									Add Tour Data</a></li>

									<li aria-haspopup="true"><a href="{% url  'tourmanagement' %}"><i class="fa fa-bus"></i>
									Tour Management</a></li>

									

									
									{% endif %}
									{% if request.user.is_admin or request.user.is_moderator or request.user.has_procurement_perm  %}
									<li aria-haspopup="true"><a href="{% url 'main_procurement_page' %}"><i class="fa fa-sitemap"></i> Procurement Home</a></li>
									<!--here all the procurements tabs go there -->
									<li aria-haspopup="true"><a href="{% url 'add_procurements_for_goods' %}" class="sub-icon"><i class="fe fe-globe"></i> Add Procurement Data  <i class="fa fa-angle-down horizontal-icon"></i></a>
										<ul class="sub-menu">
											<li aria-haspopup="true"><a href="{% url 'add_procurements_for_goods' %}">Create Plan For Goods</a></li>
											<li aria-haspopup="true"><a href="{% url 'add_procurements_for_services' %}">Create Plan For Services</a></li>
											<li aria-haspopup="true"><a href="{% url 'add_procurements_for_work' %}">Create Plan For Work</a></li>
											
										</ul>
									</li>
									<li aria-haspopup="true"><a href="index.html"><i class="fa fa-sitemap"></i> Procurement Management</a>
										<ul class="sub-menu">
											<li aria-haspopup="true"><a href="{% url 'main_procurement_page' %}">Goods</a></li>
											<li aria-haspopup="true"><a href="{% url 'procurement_list_for_services' %}">Services</a></li>
											<li aria-haspopup="true"><a href="{% url 'procurement_list_for_work' %}">Work</a></li>
											
										</ul>
									</li>

									{% endif %}
										{% if request.user.is_admin == 1  %}

									<li aria-haspopup="true"><a href="#" class="sub-icon"><i class="fe fe-globe"></i>Add Information <i class="fa fa-angle-down horizontal-icon"></i></a>
										<ul class="sub-menu">
											<li aria-haspopup="true"><a href="{% url 'add_tour_place' %}">Add tour places</a></li>
											<li aria-haspopup="true"><a href="{% url 'add_sub_sector' %}">Add Sub Sectors</a></li>
											<li aria-haspopup="true"><a href="{% url 'add_training_category' %}">Add Training Category</a></li>
											
										</ul>
									</li>

									{% endif %}

									{% if request.user.is_admin or request.user.is_moderator or request.user.has_training_perm %}

									<li aria-haspopup="true"><a href="{% url 'training_list' %}"><i class="fas fa-user-graduate"></i> Training Home</a></li>
									<li aria-haspopup="true"><a href="{% url 'add_training' %}"><i class="fas fa-user-graduate"></i>  Add Training</a></li>
									{% endif %}




								</ul>

							</nav>
							<!--Nav-->
						</div>
					</div>
				</div>
				<!--/Horizontal-main -->


				{% block content %}

				{% endblock content %}





				<!-- FOOTER -->
			<footer class="footer">
				<div class="container">
					<div class="row align-items-center flex-row-reverse">
						<div class="col-md-12 col-sm-12 text-center">
							 Copyright org Â© 2022 .  All rights reserved
						</div>
					</div>
				</div>
			</footer>
			<!-- FOOTER END -->
		</div>




		<!-- BACK-TO-TOP -->
		<a href="#top" id="back-to-top"><i class="fa fa-angle-up"></i></a>

		<!-- JQUERY JS -->
		<script src="{% static 'assets/js/jquery.min.js' %}"></script>

		<!-- BOOTSTRAP JS -->
		<script src="{% static 'assets/plugins/bootstrap/js/popper.min.js' %}"></script>
		<script src="{% static 'assets/plugins/bootstrap/js/bootstrap.min.js' %}"></script>

		<!-- SPARKLINE JS-->
		<script src="{% static 'assets/js/jquery.sparkline.min.js' %}"></script>

		<!-- CHART-CIRCLE JS-->
		<script src="{% static 'assets/js/circle-progress.min.js' %}"></script>

		<!-- CHARTJS CHART JS-->
		<script src="{% static 'assets/plugins/chart/Chart.bundle.js' %}"></script>
		<script src="{% static 'assets/plugins/chart/utils.js' %}"></script>

		<!-- PIETY CHART JS-->
		<script src="{% static 'assets/plugins/peitychart/jquery.peity.min.js' %}"></script>
		<script src="{% static 'assets/plugins/peitychart/peitychart.init.js' %}"></script>

		<!-- INTERNAL SELECT2 JS -->
		<script src="{% static 'assets/plugins/select2/select2.full.min.js' %}"></script>

		<!-- INTERNAL Data tables js-->
		<script src="{% static 'assets/plugins/datatable/js/jquery.dataTables.min.js' %}"></script>
		<script src="{% static 'assets/plugins/datatable/js/dataTables.bootstrap5.js' %}"></script>
		<script src="{% static 'assets/plugins/datatable/dataTables.responsive.min.js' %}"></script>

		<!-- ECHART JS-->
		<script src="{% static 'assets/plugins/echarts/echarts.js' %}"></script>

		<!--HORIZONTAL JS-->
		<script src="{% static 'assets/plugins/horizontal-menu/horizontal-menu.js' %}"></script>

		<!-- STICKY JS -->
		<script src="{% static 'assets/js/stiky.js' %}"></script>

		<!-- SIDEBAR JS -->
		<script src="{% static 'assets/plugins/sidebar/sidebar.js' %}"></script>

		<!-- Perfect SCROLLBAR JS-->
		<script src="{% static 'assets/plugins/p-scroll/perfect-scrollbar.js' %}"></script>
		<script src="{% static 'assets/plugins/p-scroll/pscroll-1.js' %}"></script>

		<!-- APEXCHART JS -->
		<script src="{% static 'assets/js/apexcharts.js' %}"></script>

		<!-- INDEX JS -->
		<script src="{% static 'assets/js/index1.js' %}"></script>

		<!-- CUSTOM JS -->
		<script src="{% static 'assets/js/custom.js' %}"></script>




		<script>
			//starting ajax operation

			$(document).ready(function(){
				var has_tour_perm = 0;
				var has_procurement_perm = 0;
				var has_training_perm = 0;
				var has_edit_perm = 0;
				var has_delete_perm = 0;
				$('#memberAddForm').on('submit',function(event){
				event.preventDefault();
				var role = $('#role').val();
				if($("#has_tour_perm").is(':checked')){
					has_tour_perm = 1;};

				if($("#has_procurement_perm").is(':checked')){
					has_procurement_perm = 1;};

				if($("#has_training_perm").is(':checked')){
					has_training_perm = 1;};

				if($("#has_edit_perm").is(':checked')){
					has_edit_perm = 1;};
				
				if($("#has_delete_perm").is(':checked')){
					has_delete_perm = 1;};

				if(role==''){alert('Role can not be blank !');return false;};
				$('#save').text('Please wait .......');
				$.ajax({
			      dataType:'json',
			      data:{'first_name':$('#first_name').val(),
			      		'last_name':$('#last_name').val(),
			      		'email' : $('#email').val(),
			      		'role' :role,
			      		'password':$('#password').val(),
			      		'phone':$('#phone').val(),
						'has_tour_perm':has_tour_perm,
						'has_procurement_perm':has_procurement_perm,
						'has_training_perm':has_training_perm,
						'has_edit_perm':has_edit_perm,
						'has_delete_perm':has_delete_perm,

		

			  		},
			      type:'GET',
			      url:'/users/add_member'

			    }).done(function(result){

			    		if(result.status == 'user exists'){
			    			alert('User with this email already exists');
			    			$('#save').text('Save Changes');
			    			
			    			return false
			    		}
			    		else{console.log(result);
			    			window.location.href="{% url 'home' %}";

			    		}
			    }).fail(function(){alert('Something went wrong ! Please try again later ');
			    $('#save').text('Save Changes');})
			})

			});


			//stating editing functionality of members 

			//getting users info ajax starts here


			$(document).ready(function(){
				var has_tour_perm_get = 0;
				var has_procurement_perm_get = 0;
				var has_training_perm_get = 0;
				var has_edit_perm_get = 0;
				var has_delete_perm_get = 0;
				$('.editbtn').on('click',function(){
				//event.preventDefault();
				var role = $('#role_edit').val();

				
				
				$('#save_edit').text('Please wait .......');
				$.ajax({
			      dataType:'json',
			      data:{'first_name':$('#first_name_edit').val(),
			      		'last_name':$('#last_name_edit').val(),
			      		'email' : $('#email_edit').val(),
			      		'role' :role,
			      		'password':$('#password_edit').val(),
			      		'phone':$('#phone_edit').val(),
						
						

			  		},
			      type:'GET',
			      url:'/dashboard/edit_members/?userid='+$(this).attr('memberid')

			    }).done(function(result){

			    		if(result.status != ''){

			    			
			    			
			    			$('#save_edit').text('Save Changes');
			    			$('#first_name_edit').val(result.userdata.first_name);
			    			$('#last_name_edit').val(result.userdata.last_name);
			    			$('#email_edit').val(result.userdata.email);
			    			$('#phone_edit').val(result.userdata.phone);
			    			$('#useridinform').val(result.userdata.id);
							has_tour_perm_get = result.userdata.has_tour_perm;
							has_procurement_perm_get = result.userdata.has_procurement_perm;
							has_training_perm_get = result.userdata.has_training_perm;
							has_edit_perm_get = result.userdata.has_edit_perm;
							has_delete_perm_get = result.userdata.has_delete_perm;
							if(result.userdata.has_tour_perm == 1){
								$('#has_tour_perm_edit').prop('checked',true);
							}
							if(result.userdata.has_procurement_perm == 1){
								$('#has_procurement_perm_edit').prop('checked',true);
							}
							if(result.userdata.has_training_perm == 1){
								$('#has_training_perm_edit').prop('checked',true);
							}
							if(result.userdata.has_edit_perm == 1){
								$('#has_edit_perm_edit').prop('checked',true);
							}
							if(result.userdata.has_delete_perm == 1){
								$('#has_delete_perm_edit').prop('checked',true);
							}


			    			if(result.userdata.role == "Administrator"){

			    				$('#role_edit option[value="Administrator"]').attr("selected", "selected");
			    			}

			    			else if(result.userdata.role == "Officer"){

			    				$('#role_edit option[value="Officer"]').attr("selected", "selected");

			    			}

			    			else if(result.userdata.role == "Moderator"){
			    				$('#role_edit option[value="Moderator"]').attr("selected", "selected");
			    			}

							else if(result.userdata.role == "PO User"){
			    				$('#role_edit option[value="PO User"]').attr("selected", "selected");
			    			}

	}
			    		
			    }).fail(function(){alert('Something went wrong ! Please try again later ');
			    $('#save_edit').text('Save Changes');})
			})

			})


			//end of getting data

			//edit information posting ajax starts here 

			
			$(document).ready(function(){
				var has_tour_perm_edit = 0;
				var has_procurement_perm_edit = 0;
				var has_training_perm_edit = 0;
				var has_edit_perm_edit = 0;
				var has_delete_perm_edit = 0;



				$('#editMemberForm').on('submit',function(event){
				event.preventDefault();
				var role = $('#role_edit').val();
				
				if($("#has_tour_perm_edit").is(':checked')){
					has_tour_perm_edit = 1;};

				if($("#has_procurement_perm_edit").is(':checked')){
					has_procurement_perm_edit = 1;};

				if($("#has_training_perm_edit").is(':checked')){
					has_training_perm_edit = 1;};

				if($("#has_edit_perm_edit").is(':checked')){
					has_edit_perm_edit = 1;};
				
				if($("#has_delete_perm_edit").is(':checked')){
					has_delete_perm_edit = 1;};
				
				if(role==''){alert('Role can not be blank !');return false;};
				$('#save_edit').text('Please wait .......');
				$.ajax({
			      dataType:'json',
			      data:{'first_name_edit':$('#first_name_edit').val(),
			      		'last_name_edit':$('#last_name_edit').val(),
			      		'email_edit' : $('#email_edit').val(),
			      		'role_edit' :role,
			      		//'password':$('#password').val(),
			      		'phone_edit':$('#phone_edit').val(),
			      		'csrfmiddlewaretoken':$('[name="csrfmiddlewaretoken"]').val(),
			      		'userid':$('#useridinform').val(),
						'has_tour_perm_edit':has_tour_perm_edit,
						'has_procurement_perm_edit':has_procurement_perm_edit,
						'has_training_perm_edit':has_training_perm_edit,
						'has_edit_perm_edit':has_edit_perm_edit,
						'has_delete_perm_edit':has_delete_perm_edit

			  		},
			      type:'POST',
			      url:'/dashboard/edit_members/'

			    }).done(function(result){

			    		if(result.status == 'user exists'){
			    			alert('User with this email already exists');
			    			$('#save_edit').text('Save Changes');
			    			
			    			return false
			    		}
			    		else{
			    			console.log(result);
			    			window.location.href="{% url 'home' %}";

			    		}
			    }).fail(function(){alert('Something went wrong ! Please try again later ');
			    $('#save_edit').text('Save Changes');})
			})

			});


			//ending editing functionality of members


			//deleteing members functionality starts here

			$(document).ready(function(){

				var delid = 0;

				$('.deletebtn').on('click',function(){

					delid = $(this).attr('memberid');


					//console.log(delid);
				});


				$('#confirmbtn').on('click',function(event){

					event.preventDefault();
					$('#confirmbtn').text('Please Wait.....');


					//ajax delete requesting is there

						$.ajax({
			      dataType:'json',
			      data:{
			      		
			      		'userid':delid,
			      		'csrfmiddlewaretoken':$('[name="csrfmiddlewaretoken"]').val(),

			  		},
			      type:'POST',
			      url:'/dashboard/delete_members/'

			    }).done(function(result){

			    		if(result.status != 'deleted'){
			    			alert('No user selected');
			    			$('#confirmbtn').text('Confirm Delete');
			    			
			    			return false
			    		}
			    		else{
			    			console.log(result);
			    			window.location.href="{% url 'home' %}";

			    		}
			    }).fail(function(){alert('Something went wrong ! Please try again later ');
			    $('#confirmbtn').text('Confirm Delete');});



				})

			})



			//deleteing members functionality stops here



			//deleting tour data


			$(document).ready(function(){

				var delid = 0;

				$('.deletebtntour').on('click',function(){

					delid = $(this).attr('tourid');


					//console.log(delid);
				});


				$('#confirmbtn').on('click',function(event){

					event.preventDefault();
					$('#confirmbtn').text('Please Wait.....');


					//ajax delete requesting is there

						$.ajax({
			      dataType:'json',
			      data:{
			      		
			      		'tourid':delid,
			      		'csrfmiddlewaretoken':$('[name="csrfmiddlewaretoken"]').val(),

			  		},
			      type:'POST',
			      url:'/dashboard/delete_tour/'

			    }).done(function(result){

			    		if(result.status != 'deleted'){
			    			alert('No Tour selected');
			    			$('#confirmbtn').text('Confirm Delete');
			    			
			    			return false
			    		}
			    		else{
			    			console.log(result);
			    			window.location.href="{% url 'tourmanagement' %}";

			    		}
			    }).fail(function(){alert('Something went wrong ! Please try again later ');
			    $('#confirmbtn').text('Confirm Delete');});



				})

			})


			//end of deleting tour data


			//starting deleting procurements data

			
			$(document).ready(function(){

					var delid = 0;

					$('.deletebtnpro').on('click',function(){

						delid = $(this).attr('procurementid');


						//console.log(delid);
					});


					$('.confirmbtn').on('click',function(event){

						event.preventDefault();
						$(this).text('Please Wait.....');


						//ajax delete requesting is there

							$.ajax({
					dataType:'json',
					data:{
							
							'procurementid':delid,
							'csrfmiddlewaretoken':$('[name="csrfmiddlewaretoken"]').val(),

						},
					type:'POST',
					url:'/procurements/delete_procurements_for_goods/'

					}).done(function(result){

							if(result.status != 'deleted'){
								alert('No Tour selected');
								$(this).text('Confirm Delete');
								
								return false
							}
							else{
								
								window.location.href="{% url 'main_procurement_page' %}";

							}
					}).fail(function(){alert('Something went wrong ! Please try again later ');
					$('#confirmbtn').text('Confirm Delete');});



					})

					})



			//ending deleting procurements data
	



			
//starting deleting procurements service data

			
$(document).ready(function(){

var delid = 0;

$('.deletebtnpro').on('click',function(){

	delid = $(this).attr('procurementid');


	//console.log(delid);
});


$('.confirmbtnforservice').on('click',function(event){

	event.preventDefault();
	$(this).text('Please Wait.....');


	//ajax delete requesting is there

		$.ajax({
dataType:'json',
data:{
		
		'procurementid':delid,
		'csrfmiddlewaretoken':$('[name="csrfmiddlewaretoken"]').val(),

	},
type:'POST',
url:'/procurements/delete_procurements_for_service/'

}).done(function(result){

		if(result.status != 'deleted'){
			alert('No Tour selected');
			$(this).text('Confirm Delete');
			
			return false
		}
		else{
			
			window.location.href="{% url 'procurement_list_for_services' %}";

		}
}).fail(function(){alert('Something went wrong ! Please try again later ');
$(this).text('Confirm Delete');});



})

})



//ending deleting procurements service data






//starting deleting procurements work data

			
$(document).ready(function(){

var delid = 0;

$('.deletebtnpro').on('click',function(){

	delid = $(this).attr('procurementid');


	//console.log(delid);
});


$('.confirmbtnforwork').on('click',function(event){

	event.preventDefault();
	$(this).text('Please Wait.....');


	//ajax delete requesting is there

		$.ajax({
dataType:'json',
data:{
		
		'procurementid':delid,
		'csrfmiddlewaretoken':$('[name="csrfmiddlewaretoken"]').val(),

	},
type:'POST',
url:'/procurements/delete_procurements_for_work/'

}).done(function(result){

		if(result.status != 'deleted'){
			alert('No Tour selected');
			$(this).text('Confirm Delete');
			
			return false
		}
		else{
			
			window.location.href="{% url 'procurement_list_for_work' %}";

		}
}).fail(function(){alert('Something went wrong ! Please try again later ');
$(this).text('Confirm Delete');});



})

})



//ending deleting procurements service data



//starting deleting procurements training data

			
$(document).ready(function(){

var delid = 0;

$('.deletebtnpro').on('click',function(){

	delid = $(this).attr('procurementid');


	//console.log(delid);
});


$('.confirmbtnfortraining').on('click',function(event){

	event.preventDefault();
	$(this).text('Please Wait.....');


	//ajax delete requesting is there

		$.ajax({
dataType:'json',
data:{
		
		'procurement_id':delid,
		'csrfmiddlewaretoken':$('[name="csrfmiddlewaretoken"]').val(),

	},
type:'POST',
url:'/training/training_delete/'

}).done(function(result){

		if(result.status != 'deleted'){
			alert('No data selected');
			$(this).text('Confirm Delete');
			
			return false
		}
		else{
			
			window.location.href="{% url 'training_list' %}";

		}
}).fail(function(){alert('Something went wrong ! Please try again later ');
$(this).text('Confirm Delete');});



})

})



//ending deleting procurements training data

			
			</script>
			<script src="https://code.jquery.com/ui/1.13.0-rc.3/jquery-ui.min.js" integrity="sha256-R6eRO29lbCyPGfninb/kjIXeRjMOqY3VWPVk6gMhREk=" crossorigin="anonymous"></script>
			<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.3.0/js/bootstrap-datepicker.js"></script>

			<script src="https://kit.fontawesome.com/0bca2a80a4.js" crossorigin="anonymous"></script>
			<script src="{% static 'js/custom.js' %}" > </script>

			 <script src="{% static 'assets/js/jquery.smartuploader.min.js' %}"></script>

			 <script src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/js/bootstrap-select.min.js"></script>

			 <script>

				$(document).ready(function() {

				  $('table.datatabletwo').DataTable();
				  $('table.goods').DataTable();
				$(".dataTables_length > label").attr('style','float:left');

				} );
				
				</script>

			 

<script>
    $(document).ready(function(){
       $(".cat[value={{cont.category.id}}]").attr('selected',true);
    });
  
</script>
<script>
$("#file_input").withDropZone("#drop_zone", {
  action: {
    name: "image",
    params: {
      preview: true,
    }
  },
});

</script>


<!-- starting auto calculation of perticipents-->

<script>
	$(document).ready(function(){
	$("#male_pert").keyup(function(){
		var male_pert = $("#male_pert").val();
		var female_pert = $("#female_pert").val();
		$("#total_pert").val(Number(male_pert)+Number(female_pert));
		var totalp = Number($('#total_pert').val())+ Number($('#mes_total_pert').val()) + Number($('#other_total_pert').val());
		

		$('#total_pert_all').val(totalp);

	}) ;

	$("#female_pert").keyup(function(){
		var male_pert = $("#male_pert").val();
		var female_pert = $("#female_pert").val();
		$("#total_pert").val(Number(male_pert)+Number(female_pert));

		var totalp = Number($('#total_pert').val())+ Number($('#mes_total_pert').val()) + Number($('#other_total_pert').val());

		$('#total_pert_all').val(totalp);

	}) ;


	$("#mes_male_pert").keyup(function(){
		var mes_male_pert = $("#mes_male_pert").val();
		var mes_female_pert = $("#mes_female_pert").val();
		$("#mes_total_pert").val(Number(mes_male_pert)+Number(mes_female_pert));
		var totalp = Number($('#total_pert').val())+ Number($('#mes_total_pert').val()) + Number($('#other_total_pert').val());

		$('#total_pert_all').val(totalp);

	}) ;


	$("#mes_female_pert").keyup(function(){
		var mes_male_pert = $("#mes_male_pert").val();
		var mes_female_pert = $("#mes_female_pert").val();
		$("#mes_total_pert").val(Number(mes_male_pert)+Number(mes_female_pert));

		var totalp = Number($('#total_pert').val())+ Number($('#mes_total_pert').val()) + Number($('#other_total_pert').val());

		$('#total_pert_all').val(totalp);

	}) ;




	$("#other_male_pert").keyup(function(){
		var other_male_pert = $("#other_male_pert").val();
		var other_female_pert = $("#other_female_pert").val();
		$("#other_total_pert").val(Number(other_male_pert)+Number(other_female_pert));
		var totalp = Number($('#total_pert').val())+ Number($('#mes_total_pert').val()) + Number($('#other_total_pert').val());

		$('#total_pert_all').val(totalp);

	}) ;


	$("#other_female_pert").keyup(function(){
		var other_male_pert = $("#other_male_pert").val();
		var other_female_pert = $("#other_female_pert").val();
		$("#other_total_pert").val(Number(other_male_pert)+Number(other_female_pert));

		var totalp = Number($('#total_pert').val())+ Number($('#mes_total_pert').val()) + Number($('#other_total_pert').val());

		$('#total_pert_all').val(totalp);
	}) ;


})
	   
</script>



<!-- ending auto calculation of perticipents-->
<script src="https://cdn.rawgit.com/harvesthq/chosen/gh-pages/chosen.jquery.min.js"></script>

<script>
$(".chosen-select").chosen({
  no_results_text: "Oops, nothing found!"
})
</script>


	</body>
</html>